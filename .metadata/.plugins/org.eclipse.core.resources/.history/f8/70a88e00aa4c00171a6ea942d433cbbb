package Hibrido;

import java.util.Random;

import Receptor.CPU;
import Receptor.Task;

public class HibridStrategy {


	public void doEmissorSurvey(CPU cpu, MultiCPUSystem system, Task task) {
		// TODO Auto-generated method stub
		
	}

	public void doReceptorSurvey(CPU cpu, MultiCPUSystem system, Object object) {
		for (int i = 0; i < RETRY; i++ ) {
			Random random = new Random();
			int randomCPU = random.nextInt(system.getSystem().size());
			CPU newCPU = system.getCPU(randomCPU);
			if (newCPU.getID() != thisCPU.getID()) {
				System.out.println("Request from CPU " + thisCPU.getID() + 
						" to CPU " + newCPU.getID());
							
				if (!newCPU.isFree(thisCPU)) {
					Task pullTask = newCPU.takeRandomTask();
					System.out.println("Task" + pullTask.getID() + "was transfered from CPU "
							+ newCPU.getID() + "to CPU " + thisCPU.getID());
					thisCPU.pullTask(pullTask);
					return;
				}
				
			}
		}
		
	}

}
